# <title>二维区域和检索 - 矩阵不可变</title>

# 一、题目描述

![img](https://img-blog.csdnimg.cn/a0718dbd893243208d5dca3f8ae0a647.png)

# 二、示例

![img](https://img-blog.csdnimg.cn/f404456eb9c8473f9fd70272c25606cc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bmy5bmy6ISG6ISG55qE5bCP6aW85bmyNjY4OA==,size_14,color_FFFFFF,t_70,g_se,x_16)

# 三、代码

## Java版

### 3.1 法一：暴力法

```java
package per.Kidd.demo;

/**
 * @author Kidd
 * @create 2022-04-15 20:00
 */

/*
 *  304. 二维区域和检索 - 矩阵不可变
 *      法一：暴力法
 *           时间复杂度:O(n²)
 */
public class NumMatrix {

    private int[][] matrix;

    public NumMatrix(int[][] matrix) {
        this.matrix = matrix;
    }

    public int sumRegion(int row1, int col1, int row2, int col2) {
        int sum = 0;
        for(int i = row1; i <= row2; ++i) {
            for(int j = col1; j <= col2; ++j) {
                sum += matrix[i][j];
            }
        }
        return sum;
    }

    public static void main(String[] args) {
        int[][] matrixArray = {
                {3,0,1,4,2},
                {5,6,3,2,1},
                {1,2,0,1,5},
                {4,1,0,1,7},
                {1,0,3,0,5}
        };
        NumMatrix matrix = new NumMatrix(matrixArray);
        System.out.println(matrix.sumRegion(2,1,4,3));
    }
}
```

### 3.2 法二：数组不可变拓展

> 看作多个一维数组前缀和

```java
package per.Kidd.demo;
/*
 *  304. 二维区域和检索 - 矩阵不可变
 *      法二：数组不可变拓展
 */
public class NumMatrix {
    //记录每行前n个数之和
    private int[][] preSumMatrix;

    public void print() {
        for(int[] arr : preSumMatrix) {
            for(int a : arr) {
                System.out.print(a+" ");
            }
            System.out.println();
        }
    }

    public NumMatrix(int[][] matrix) {
        preSumMatrix = new int[matrix.length + 1][matrix[0].length + 1];
        //计算每行前n个数之和
        for(int i = 0; i < matrix.length; ++i) {
            for(int j = 0; j < matrix[0].length; ++j) {
                preSumMatrix[i][j+1] = matrix[i][j] + preSumMatrix[i][j];
            }
        }
    }

    public int sumRegion(int row1, int col1, int row2, int col2) {
        int sum = 0;
        for(int i = row1; i <= row2; ++i) {
            sum += preSumMatrix[i][col2 + 1] - preSumMatrix[i][col1];
        }
        return sum;
    }

    public static void main(String[] args) {
        int[][] matrixArray = {
                {3,0,1,4},
                {5,6,3,2},
                {1,2,0,1},
                {4,1,0,1},
                {1,0,3,0}
        };
        NumMatrix matrix = new NumMatrix(matrixArray);
        System.out.println(matrix.sumRegion(1, 2, 2, 3));

    }
}
```

### 4.3 法三：二维前缀和解法（学习中 待更新…）